You got the host right. Since it’s still not connecting, let’s isolate where it’s failing and fix it fast.

## 0) Quick sanity: agent must be Public

In the agent’s **Security** tab:

* **Enable authentication** = **OFF** (agent is Public)
* **Allowlist** contains **exact host** you added (saved)
* **Overrides** → **Agent language = ON**, the others **OFF**

---

## 1) Run a 1-minute smoke test (bypasses your React code)

This tells us if the problem is your app or the agent/allowlist.

**Create this file in your repo:** `public/convai-smoke.html`

```html
<!doctype html>
<html lang="en">
  <head><meta charset="utf-8"><title>ConvAI Smoke</title></head>
  <body>
    <h1>ConvAI Smoke Test</h1>
    <p>If the widget appears below and speaks, your agent + allowlist are good.</p>

    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed"></script>

    <!-- paste one of your agent IDs below -->
    <elevenlabs-convai agent-id="agent_0101k6691t11ew6bcfm3396wfhza"></elevenlabs-convai>
  </body>
</html>
```

Open:
`https://b25c550a-8c80-4a60-8697-07d7e8e65e8c-00-2h5xmpuah2h6j.spock.replit.dev/convai-smoke.html`

**Result interpretation**

* **Widget loads & talks** → Agent + allowlist OK. The issue is in our React mount (we’ll fix in step 3).
* **It doesn’t load** → It’s still an **agent/allowlist/public** issue (step 2).

---

## 2) If the smoke test fails

Check the **Network** tab in DevTools while the smoke page is open:

* **403** to `*.elevenlabs.io` → allowlist mismatch. Verify it exactly equals:

  ```
  b25c550a-8c80-4a60-8697-07d7e8e65e8c-00-2h5xmpuah2h6j.spock.replit.dev
  ```

  (No scheme, no slash, saved.)
* **401** → agent is not Public (toggle OFF “Enable authentication”).
* **404** → wrong `agent-id` (copy again from the agent page).
* **(blocked)/CSP** → some content-security-policy or extension is blocking `unpkg.com` or `*.elevenlabs.io`. Disable ad blockers and make sure you didn’t add a strict CSP that excludes those.

> Also: add the allowlist entry to **each** of your five agents, not just one.

---

## 3) If the smoke test works but your app still doesn’t

Then it’s our embed flow. Make these two quick fixes:

### A) Ensure the client flag is visible

In Replit **Secrets** set:

* `VITE_USE_CONVAI = true`

Rebuild/reload and confirm in console:

```js
import.meta.env.VITE_USE_CONVAI  // should print "true"
```

### B) Fix the unmount crash (your screenshot shows it)

In `client/src/components/ConvaiHost.tsx` replace the cleanup with a null-safe version:

```tsx
return () => {
  try { (el as any)?.disconnect?.(); } catch {}
  const node = containerRef.current;
  if (node) {
    try { node.innerHTML = ""; } catch {}
    node.removeAttribute("aria-busy");
  }
  try { onUnmounted?.(); } catch {}
};
```

And anywhere you had `containerRef.current!.innerHTML`, change to:

```tsx
if (containerRef.current) containerRef.current.innerHTML = "";
```

Add a load error for visibility:

```tsx
s.onerror = () => {
  console.error("[ConvAI] Failed to load embed script from unpkg.");
  alert("The tutor widget failed to load. Check allowlist/Public and try again.");
};
```

---

## 4) (Optional but helpful) Deploy to a stable host

Replit “spock” preview hosts change. For fewer allowlist edits:

* Use **Replit Deployments** → stable `*.replit.app` domain. Add that host to the allowlist too.
* Or a custom domain (e.g., `tutor.yourdomain.com`) and allowlist it.

---

## 5) Tell me which case you hit

* Smoke test **works / fails**
* Network status you saw (**401 / 403 / 404 / blocked**)
* If it’s working on smoke page, I’ll patch your React files 1:1 so Start/Switch/Stop are solid.

You do **not** need to move to GitHub Pages to make this work. Let’s get the smoke page green first; that pinpoints the issue instantly.
